<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Korean Phrase Game</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Pixel Art Styles */
        .pixel-art {
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }
        
        /* Custom animations */
        @keyframes bounce-in {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .bounce-in { animation: bounce-in 0.5s ease-out; }
        .shake { animation: shake 0.3s ease-in-out; }
        
        /* Pixel art character styles */
        .character {
            width: 64px;
            height: 64px;
            position: relative;
        }
        
        /* Speech bubble styles */
        .speech-bubble {
            position: relative;
            background: white;
            border: 2px solid #333;
            border-radius: 8px;
            padding: 12px;
            margin: 10px;
            max-width: 250px;
            font-family: 'Courier New', monospace;
        }
        
        .speech-bubble::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 20px;
            width: 0;
            height: 0;
            border: 10px solid transparent;
            border-top-color: white;
            border-left: 0;
            border-right: 10px solid transparent;
            border-right-color: #333;
        }
        
        .speech-bubble.npc::after {
            right: 20px;
            left: auto;
            border-left: 10px solid transparent;
            border-right: 0;
            border-left-color: #333;
        }
        
        /* Game container */
        .game-container {
            background: linear-gradient(135deg, #87CEEB 0%, #98FB98 100%);
            min-height: 100vh;
            font-family: 'Courier New', monospace;
        }
        
        /* Pixel button styles */
        .pixel-button {
            background: #4a5568;
            border: 2px solid #2d3748;
            color: white;
            padding: 8px 16px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.1s ease;
        }
        
        .pixel-button:hover {
            background: #718096;
            transform: translateY(-1px);
        }
        
        .pixel-button:active {
            transform: translateY(1px);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Must-know Korean phrases from "Learn Korean with Kelly"
        const mustKnowPhrases = {
            phrases1: [
                { korean: "Îã§ Ï§ÄÎπÑÎêêÏñ¥?" },
                { korean: "Îã§Î•∏ Í±¥ ÏóÜÏñ¥?" },
                { korean: "ÌôïÏã§Ìï¥?" },
                { korean: "Ï¢ãÎÑ§, Ï¢ãÏïÑ" },
                { korean: "ÎßûÏïÑ" },
                { korean: "Í∑∏Îßå Ï¢Ä Ìï¥. ÏûëÏûëÌï¥." },
                { korean: "Í∑∏ÎïåÍ∑∏Îïå Îã¨Îùº." },
                { korean: "Ïò§Ìï¥ÌïòÏßÄ Îßà." },
                { korean: "Í±±Ï†ïÌïòÏßÄ Îßà." },
                { korean: "ÎßõÏûàÍ≤å Î®πÏñ¥." },
                { korean: "Í∑∏Îûò Ïù∏Ï†ï." },
                { korean: "Îã§ÌñâÏù¥Ïïº" },
                { korean: "ÏûòÎêêÎÑ§. Ï∂ïÌïòÌï¥." },
                { korean: "Ïû†ÍπêÎßå, Ïû†ÏãúÎßå" }
            ],
            phrases2: [
                { korean: "ÎèôÏùòÌï¥" },
                { korean: "Ïû•ÎÇúÌï¥?" },
                { korean: "ÎÑà Ï¢ãÏùÑÎåÄÎ°ú Ìï¥" },
                { korean: "ÎÇòÎèÑ Î™∞Îùº" },
                { korean: "Î∂ÄÌÉÅ ÌïòÎÇòÎßå Ìï†Í≤å" },
                { korean: "Î®ºÏ†Ä Ìï¥" },
                { korean: "ÏïåÍ≤†Ïñ¥" },
                { korean: "Ïñ¥Ïß∏ÏÑú? Ïôú?" },
                { korean: "Ïñ¥ÎñªÍ≤å ÎêêÏñ¥?" },
                { korean: "ÏùºÎ∂ÄÎü¨ Í∑∏Îü∞Í±∞ ÏïÑÎãàÏïº" },
                { korean: "Ïù¥Ìï¥Í∞Ä ÏïàÎèº" },
                { korean: "ÎÇò Í∞ÄÏïºÍ≤†Îã§" },
                { korean: "Í∑∏Îü¥Ï§Ñ ÏïåÏïòÏñ¥" },
                { korean: "Í∑∏ ÎßêÏùÄ Ï∑®ÏÜåÌï†Í≤å" }
            ],
            phrases3: [
                { korean: "Ïûò Í∞Ä" },
                { korean: "Î¨∏Ïûê Ìï¥" },
                { korean: "Í∑∏Í±∞ ÎÑàÌïúÌÖå Ïûò Ïñ¥Ïö∏Î†§" },
                { korean: "ÎÑàÎ¨¥ ÏïÑÍπùÎã§!" },
                { korean: "ÎÇ¥ ÎßêÏù¥ Í∑∏Í±∞Ïïº" },
                { korean: "ÏãúÍ∞Ñ ÏßÑÏßú Îπ†Î•¥Îã§" },
                { korean: "ÏÉÅÌô© Ï¢Ä Î≥¥Ïûê" },
                { korean: "Í∑∏Í≤å Î≠ê?" },
                { korean: "Ïñ¥Ï©åÍ≤†Ïñ¥?" },
                { korean: "Í∑∏Í≤å Î¨¥Ïä® ÎúªÏù¥Ïïº?" },
                { korean: "Ïñ¥ÎñªÍ≤å ÎêúÍ±∞Ïïº? Î¨¥Ïä®ÏùºÏù¥Ïïº?" },
                { korean: "Ïò§Îäò Î¨¥Ïä® ÎÇ†Ïù¥Ïïº?" },
                { korean: "Í∑∏Îü¨Îì†ÏßÄ" },
                { korean: "Îì§Ïº∞Îã§." },
                { korean: "Í∑∏Í±∞ ÏïåÏïÑ?" }
            ]
        };

        // Natural Korean conversations using must-know phrases
        const conversations = [
            // Natural Q&A pairs
            {
                id: "conversation_1",
                title: "Ï§ÄÎπÑ ÌôïÏù∏",
                npcMessage: "Ïù¥Ï†ú Í∞à Ï§ÄÎπÑ Îã§ ÎêêÏñ¥?",
                correctPhrase: "Îã§ Ï§ÄÎπÑÎêêÏñ¥?",
                category: "phrases1"
            },
            {
                id: "conversation_2", 
                title: "Ïπ≠Ï∞¨ÌïòÍ∏∞",
                npcMessage: "ÏÉà Ïò∑ Ïñ¥Îïå?",
                correctPhrase: "Ï¢ãÎÑ§, Ï¢ãÏïÑ",
                category: "phrases1"
            },
            {
                id: "conversation_3",
                title: "ÎßûÎã§Í≥† ÎèôÏùò",
                npcMessage: "ÎÇ¥ ÎßêÏù¥ ÎßûÏßÄ?",
                correctPhrase: "ÎßûÏïÑ",
                category: "phrases1"
            },
            {
                id: "conversation_4",
                title: "Í±±Ï†ïÌïòÏßÄ ÎßêÎùºÍ≥†",
                npcMessage: "Í¥úÏ∞ÆÏùÑÍπå Í±±Ï†ïÎèº.",
                correctPhrase: "Í±±Ï†ïÌïòÏßÄ Îßà.",
                category: "phrases1"
            },
            {
                id: "conversation_5",
                title: "ÎßõÏûàÍ≤å Î®πÏúºÎùºÍ≥†",
                npcMessage: "Î∞∞Í≥†ÌååÏÑú Î∞• Î®πÏùÑÍ≤å.",
                correctPhrase: "ÎßõÏûàÍ≤å Î®πÏñ¥.",
                category: "phrases1"
            },
            {
                id: "conversation_6",
                title: "ÎèôÏùòÌïúÎã§Í≥†",
                npcMessage: "ÎÇ¥ ÏÉùÍ∞ÅÏù¥ ÎßûÏßÄ?",
                correctPhrase: "ÎèôÏùòÌï¥",
                category: "phrases2"
            },
            {
                id: "conversation_7",
                title: "Ïû•ÎÇúÏπòÎäî Í±∞ ÏïÑÎãàÎÉêÍ≥†",
                npcMessage: "Ï†ïÎßêÎ°ú Í∑∏Îü∞ ÏùºÏù¥ ÏûàÏñ¥?",
                correctPhrase: "Ïû•ÎÇúÌï¥?",
                category: "phrases2"
            },
            {
                id: "conversation_8",
                title: "ÎÇòÎèÑ Î™®Î•∏Îã§Í≥†",
                npcMessage: "Ïù¥Í±∞ Ïñ¥ÎñªÍ≤å ÌïòÎäîÏßÄ ÏïåÏïÑ?",
                correctPhrase: "ÎÇòÎèÑ Î™∞Îùº",
                category: "phrases2"
            },
            {
                id: "conversation_9",
                title: "ÏïåÍ≤†Îã§Í≥†",
                npcMessage: "Ïù¥Ìï¥ÌñàÏñ¥?",
                correctPhrase: "ÏïåÍ≤†Ïñ¥",
                category: "phrases2"
            },
            {
                id: "conversation_10",
                title: "ÏùòÎèÑÏ†ÅÏúºÎ°ú Ìïú Í≤å ÏïÑÎãàÎùºÍ≥†",
                npcMessage: "ÏùºÎ∂ÄÎü¨ Í∑∏Îü∞ Í±∞Ïïº?",
                correctPhrase: "ÏùºÎ∂ÄÎü¨ Í∑∏Îü∞Í±∞ ÏïÑÎãàÏïº",
                category: "phrases2"
            },
            {
                id: "conversation_11",
                title: "ÏïàÎÖïÌûà Í∞ÄÎùºÍ≥†",
                npcMessage: "Ïù¥Ï†ú ÏßëÏóê Í∞àÍ≤å.",
                correctPhrase: "Ïûò Í∞Ä",
                category: "phrases3"
            },
            {
                id: "conversation_12",
                title: "Î¨∏ÏûêÌïòÎùºÍ≥†",
                npcMessage: "ÎÇòÏ§ëÏóê Ïó∞ÎùΩÌï†Í≤å.",
                correctPhrase: "Î¨∏Ïûê Ìï¥",
                category: "phrases3"
            },
            {
                id: "conversation_13",
                title: "Ïûò Ïñ¥Ïö∏Î¶∞Îã§Í≥†",
                npcMessage: "ÏÉà Ïò∑ Ïñ¥Îïå?",
                correctPhrase: "Í∑∏Í±∞ ÎÑàÌïúÌÖå Ïûò Ïñ¥Ïö∏Î†§",
                category: "phrases3"
            },
            {
                id: "conversation_14",
                title: "ÏïÑÍπùÎã§Í≥†",
                npcMessage: "Í±∞Ïùò Îã§ ÎêêÎäîÎç∞...",
                correctPhrase: "ÎÑàÎ¨¥ ÏïÑÍπùÎã§!",
                category: "phrases3"
            },
            {
                id: "conversation_15",
                title: "ÏãúÍ∞ÑÏù¥ Îπ†Î•¥Îã§Í≥†",
                npcMessage: "Î≤åÏç® Ïù¥Î†áÍ≤å ÏãúÍ∞ÑÏù¥...",
                correctPhrase: "ÏãúÍ∞Ñ ÏßÑÏßú Îπ†Î•¥Îã§",
                category: "phrases3"
            },
            {
                id: "conversation_16",
                title: "ÏÉÅÌô©ÏùÑ Î≥¥ÏûêÍ≥†",
                npcMessage: "Ïñ¥ÎñªÍ≤å Ìï†Íπå?",
                correctPhrase: "ÏÉÅÌô© Ï¢Ä Î≥¥Ïûê",
                category: "phrases3"
            },
            {
                id: "conversation_17",
                title: "Í∑∏Í≤å Î≠êÎÉêÍ≥†",
                npcMessage: "Í∑∏Í±∞ ÏïåÏïÑ?",
                correctPhrase: "Í∑∏Í≤å Î≠ê?",
                category: "phrases3"
            },
            {
                id: "conversation_18",
                title: "Ïñ¥Ï©åÍ≤†Îã§Í≥†",
                npcMessage: "Ïñ¥ÎñªÍ≤å ÌïòÏßÄ?",
                correctPhrase: "Ïñ¥Ï©åÍ≤†Ïñ¥?",
                category: "phrases3"
            },
            {
                id: "conversation_19",
                title: "ÎúªÏù¥ Î≠îÏßÄ Î¨ªÍ∏∞",
                npcMessage: "Í∑∏Îü∞ Îßê ÌñàÏñ¥.",
                correctPhrase: "Í∑∏Í≤å Î¨¥Ïä® ÎúªÏù¥Ïïº?",
                category: "phrases3"
            },
            {
                id: "conversation_20",
                title: "ÌôïÏã† ÌôïÏù∏",
                npcMessage: "Ï†ïÎßê Í∑∏Î†áÍ≤å ÏÉùÍ∞ÅÌï¥?",
                correctPhrase: "ÌôïÏã§Ìï¥?",
                category: "phrases1"
            }
        ];

        // Traditional Korean Hanbok Pixel Art Characters
        const PixelCharacter = ({ type, isTalking = false, className = "" }) => {
            const isFemale = type === 'npc';
            
            return (
                <div className={`character ${className} ${isTalking ? 'animate-pulse' : ''}`}>
                    <div className="w-full h-full pixel-art relative">
                        {/* Shadow */}
                        <div className="absolute bottom-0 left-1/2 transform -translate-x-1/2 w-8 h-2 bg-gray-600 opacity-50 rounded-full"></div>
                        
                        {/* Head */}
                        <div className="absolute top-1 left-1/2 transform -translate-x-1/2 w-10 h-10 bg-pink-200 border-2 border-gray-800 rounded-sm">
                            {/* Hair */}
                            <div className={`absolute -top-1 left-0 w-full h-4 ${isFemale ? 'bg-blue-900' : 'bg-blue-900'} border-2 border-gray-800 rounded-t-sm`}>
                                {isFemale && (
                                    <>
                                        {/* Hair accessory */}
                                        <div className="absolute -top-1 left-1/2 transform -translate-x-1/2 w-4 h-2 bg-pink-300 border border-gray-800"></div>
                                        <div className="absolute -top-1 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-white border border-gray-800"></div>
                                    </>
                                )}
                                {!isFemale && (
                                    <>
                                        {/* Cap */}
                                        <div className="absolute -top-1 left-0 w-full h-3 bg-gray-800 border-2 border-gray-800"></div>
                                        <div className="absolute top-1 left-1/2 transform -translate-x-1/2 w-6 h-1 bg-white"></div>
                                    </>
                                )}
                            </div>
                            
                            {/* Eyes */}
                            <div className="absolute top-4 left-2 w-1 h-1 bg-black"></div>
                            <div className="absolute top-4 right-2 w-1 h-1 bg-black"></div>
                            
                            {/* Mouth */}
                            <div className={`absolute top-6 left-1/2 transform -translate-x-1/2 ${isTalking ? 'w-3 h-1 bg-red-400' : 'w-2 h-1 bg-gray-600'}`}></div>
                        </div>
                        
                        {/* Body - Hanbok */}
                        {isFemale ? (
                            <>
                                {/* Female Hanbok - Jeogori (top) */}
                                <div className="absolute top-8 left-1/2 transform -translate-x-1/2 w-8 h-6 bg-teal-400 border-2 border-gray-800">
                                    {/* White inner layer */}
                                    <div className="absolute top-0 left-0 w-full h-2 bg-white border-b border-gray-800"></div>
                                    {/* Yellow accents */}
                                    <div className="absolute top-2 left-0 w-1 h-2 bg-yellow-400"></div>
                                    <div className="absolute top-2 right-0 w-1 h-2 bg-yellow-400"></div>
                                </div>
                                
                                {/* Female Hanbok - Chima (skirt) */}
                                <div className="absolute top-12 left-1/2 transform -translate-x-1/2 w-12 h-8 bg-purple-500 border-2 border-gray-800 rounded-b-sm">
                                    {/* Decorative patterns */}
                                    <div className="absolute top-1 left-2 w-1 h-1 bg-yellow-400"></div>
                                    <div className="absolute top-2 right-3 w-1 h-1 bg-pink-400"></div>
                                    <div className="absolute top-4 left-4 w-1 h-1 bg-yellow-400"></div>
                                    <div className="absolute top-5 right-2 w-1 h-1 bg-pink-400"></div>
                                </div>
                                
                                {/* Arms */}
                                <div className="absolute top-8 left-0 w-2 h-4 bg-teal-500 border-2 border-gray-800"></div>
                                <div className="absolute top-8 right-0 w-2 h-4 bg-teal-500 border-2 border-gray-800"></div>
                            </>
                        ) : (
                            <>
                                {/* Male Hanbok - Jeogori (top) */}
                                <div className="absolute top-8 left-1/2 transform -translate-x-1/2 w-8 h-6 bg-white border-2 border-gray-800">
                                    {/* Red vest */}
                                    <div className="absolute top-1 left-1 w-6 h-4 bg-red-500 border border-gray-800"></div>
                                </div>
                                
                                {/* Male Hanbok - Baji (pants) */}
                                <div className="absolute top-12 left-1/2 transform -translate-x-1/2 w-8 h-8 bg-teal-400 border-2 border-gray-800">
                                    {/* Pants legs */}
                                    <div className="absolute bottom-0 left-1 w-2 h-6 bg-teal-500 border border-gray-800"></div>
                                    <div className="absolute bottom-0 right-1 w-2 h-6 bg-teal-500 border border-gray-800"></div>
                                </div>
                                
                                {/* Arms */}
                                <div className="absolute top-8 left-0 w-2 h-4 bg-teal-500 border-2 border-gray-800"></div>
                                <div className="absolute top-8 right-0 w-2 h-4 bg-teal-500 border-2 border-gray-800"></div>
                            </>
                        )}
                    </div>
                </div>
            );
        };

        // Speech Bubble Component
        const SpeechBubble = ({ message, isNpc = false, className = "" }) => {
            return (
                <div className={`speech-bubble ${isNpc ? 'npc' : ''} ${className}`}>
                    <div className="text-sm font-bold text-gray-800">{message}</div>
                </div>
            );
        };

        // Main Game Component
        const KoreanPhraseGame = () => {
            const [currentConversation, setCurrentConversation] = useState(0);
            const [gameState, setGameState] = useState('intro'); // intro, playing, result
            const [selectedPhrase, setSelectedPhrase] = useState('');
            const [showFeedback, setShowFeedback] = useState(false);
            const [feedbackMessage, setFeedbackMessage] = useState('');
            const [isCorrect, setIsCorrect] = useState(false);
            const [npcIsTalking, setNpcIsTalking] = useState(false);
            const [playerIsTalking, setPlayerIsTalking] = useState(false);
            const [score, setScore] = useState(0);
            const [totalQuestions, setTotalQuestions] = useState(0);
            const [correctAnswers, setCorrectAnswers] = useState(0);
            const [wrongAnswers, setWrongAnswers] = useState(0);
            const [conversationHistory, setConversationHistory] = useState([]);

            const conversation = conversations[currentConversation];
            // Get phrases from the same category as the conversation, limit to 3 choices
            const allPhrases = mustKnowPhrases[conversation.category] || [];
            const correctPhrase = allPhrases.find(p => p.korean === conversation.correctPhrase);
            
            // Get 2-3 wrong options from the same category
            const wrongPhrases = allPhrases.filter(p => p.korean !== conversation.correctPhrase);
            const shuffledWrong = [...wrongPhrases].sort(() => Math.random() - 0.5);
            const selectedWrong = shuffledWrong.slice(0, 2);
            
            // Combine correct answer with wrong options and shuffle
            const availablePhrases = [correctPhrase, ...selectedWrong]
                .filter(Boolean)
                .sort(() => Math.random() - 0.5);

            const handlePhraseSelect = (phrase) => {
                setSelectedPhrase(phrase.korean);
                setPlayerIsTalking(true);
                setTotalQuestions(prev => prev + 1);
                
                // Check if correct
                const correct = phrase.korean === conversation.correctPhrase;
                setIsCorrect(correct);
                
                // Update scoring
                if (correct) {
                    setCorrectAnswers(prev => prev + 1);
                    setScore(prev => prev + 10);
                    setFeedbackMessage("Ï†ïÌôïÌï¥Ïöî! (Correct!)");
                } else {
                    setWrongAnswers(prev => prev + 1);
                    setFeedbackMessage("Ïùå? (Huh?)");
                }
                
                // Add to conversation history
                setConversationHistory(prev => [...prev, {
                    conversation: conversation.title,
                    selected: phrase.korean,
                    correct: conversation.correctPhrase,
                    wasCorrect: correct
                }]);
                
                setShowFeedback(true);
                
                // Reset talking states
                setTimeout(() => {
                    setPlayerIsTalking(false);
                    setNpcIsTalking(false);
                    setShowFeedback(false);
                    
                    if (correct) {
                        // Move to next conversation or show completion
                        setTimeout(() => {
                            if (currentConversation < conversations.length - 1) {
                                setCurrentConversation(prev => prev + 1);
                                setSelectedPhrase(''); // Reset selected phrase for next question
                                setNpcIsTalking(true);
                            } else {
                                setGameState('result');
                            }
                        }, 1000);
                    } else {
                        // Reset selected phrase after wrong answer so they can try again
                        setSelectedPhrase('');
                    }
                }, 2000);
            };

            const startGame = () => {
                setGameState('playing');
                setNpcIsTalking(true);
            };

            const resetGame = () => {
                setCurrentConversation(0);
                setGameState('intro');
                setSelectedPhrase('');
                setShowFeedback(false);
                setIsCorrect(false);
                setScore(0);
                setTotalQuestions(0);
                setCorrectAnswers(0);
                setWrongAnswers(0);
                setConversationHistory([]);
            };

            if (gameState === 'intro') {
                return (
                    <div className="game-container flex items-center justify-center p-4">
                        <div className="bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center">
                            <h1 className="text-2xl font-bold mb-4 text-gray-800">ÌïúÍµ≠Ïñ¥ ÌëúÌòÑ Í≤åÏûÑ</h1>
                            <p className="text-gray-600 mb-6">
                                ÌîΩÏÖÄ Ï∫êÎ¶≠ÌÑ∞ÏôÄ ÎåÄÌôîÌïòÎ©∞ ÌïÑÏàò ÌïúÍµ≠Ïñ¥ ÌëúÌòÑÏùÑ Ïó∞ÏäµÌï¥Î≥¥ÏÑ∏Ïöî!
                            </p>
                            <button 
                                onClick={startGame}
                                className="pixel-button text-lg px-6 py-3"
                            >
                                Í≤åÏûÑ ÏãúÏûë
                            </button>
                        </div>
                    </div>
                );
            }

            if (gameState === 'result') {
                const accuracy = totalQuestions > 0 ? Math.round((correctAnswers / totalQuestions) * 100) : 0;
                const getGrade = () => {
                    if (accuracy >= 90) return { grade: "A+", emoji: "üèÜ", color: "text-yellow-600" };
                    if (accuracy >= 80) return { grade: "A", emoji: "ü•á", color: "text-green-600" };
                    if (accuracy >= 70) return { grade: "B", emoji: "ü•à", color: "text-blue-600" };
                    if (accuracy >= 60) return { grade: "C", emoji: "ü•â", color: "text-orange-600" };
                    return { grade: "D", emoji: "üìö", color: "text-red-600" };
                };
                const gradeInfo = getGrade();
                
                return (
                    <div className="game-container flex items-center justify-center p-4">
                        <div className="bg-white rounded-lg shadow-lg p-8 max-w-2xl w-full text-center">
                            <h1 className="text-3xl font-bold mb-4 text-green-600">üéâ Ï∂ïÌïòÌï©ÎãàÎã§!</h1>
                            <p className="text-gray-600 mb-6">
                                Î™®Îì† ÎåÄÌôîÎ•º ÏôÑÎ£åÌñàÏäµÎãàÎã§! Í≤∞Í≥ºÎ•º ÌôïÏù∏Ìï¥Î≥¥ÏÑ∏Ïöî:
                            </p>
                            
                            {/* Statistics */}
                            <div className="grid grid-cols-2 gap-4 mb-6">
                                <div className="bg-blue-50 p-4 rounded-lg">
                                    <div className="text-2xl font-bold text-blue-600">{score}</div>
                                    <div className="text-sm text-gray-600">Ï¥ù Ï†êÏàò</div>
                                </div>
                                <div className="bg-green-50 p-4 rounded-lg">
                                    <div className="text-2xl font-bold text-green-600">{accuracy}%</div>
                                    <div className="text-sm text-gray-600">Ï†ïÌôïÎèÑ</div>
                                </div>
                                <div className="bg-purple-50 p-4 rounded-lg">
                                    <div className="text-2xl font-bold text-purple-600">{correctAnswers}</div>
                                    <div className="text-sm text-gray-600">ÎßûÏ∂§</div>
                                </div>
                                <div className="bg-red-50 p-4 rounded-lg">
                                    <div className="text-2xl font-bold text-red-600">{wrongAnswers}</div>
                                    <div className="text-sm text-gray-600">ÌãÄÎ¶º</div>
                                </div>
                            </div>
                            
                            {/* Grade */}
                            <div className={`text-4xl font-bold ${gradeInfo.color} mb-4`}>
                                {gradeInfo.emoji} Îì±Í∏â {gradeInfo.grade}
                            </div>
                            
                            {/* Conversation History */}
                            <div className="mt-6 text-left">
                                <h3 className="font-bold text-gray-800 mb-3">ÎåÄÌôî Î≥µÏäµ:</h3>
                                <div className="max-h-40 overflow-y-auto space-y-2">
                                    {conversationHistory.map((item, index) => (
                                        <div key={index} className={`p-2 rounded text-sm ${item.wasCorrect ? 'bg-green-100' : 'bg-red-100'}`}>
                                            <div className="font-semibold">{item.conversation}</div>
                                            <div>ÎãπÏã†: {item.selected}</div>
                                            {!item.wasCorrect && <div>Ï†ïÎãµ: {item.correct}</div>}
                                        </div>
                                    ))}
                                </div>
                            </div>
                            
                            <div className="mt-6 space-x-4">
                                <button 
                                    onClick={resetGame}
                                    className="pixel-button text-lg px-6 py-3"
                                >
                                    Îã§Ïãú ÌïòÍ∏∞
                                </button>
                                <button 
                                    onClick={() => setGameState('intro')}
                                    className="pixel-button text-lg px-6 py-3"
                                >
                                    Î©îÏù∏ Î©îÎâ¥
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="game-container p-4">
                    {/* Header */}
                    <div className="text-center mb-6">
                        <h1 className="text-xl font-bold text-gray-800 mb-2">{conversation.title}</h1>
                        <p className="text-sm text-gray-600">ÎåÄÌôî {currentConversation + 1} / {conversations.length}</p>
                        
                        {/* Score Display */}
                        <div className="flex justify-center space-x-4 mt-4">
                            <div className="bg-white bg-opacity-80 px-3 py-1 rounded-lg">
                                <span className="text-sm font-bold text-blue-600">Ï†êÏàò: {score}</span>
                            </div>
                            <div className="bg-white bg-opacity-80 px-3 py-1 rounded-lg">
                                <span className="text-sm font-bold text-green-600">‚úì {correctAnswers}</span>
                            </div>
                            <div className="bg-white bg-opacity-80 px-3 py-1 rounded-lg">
                                <span className="text-sm font-bold text-red-600">‚úó {wrongAnswers}</span>
                            </div>
                        </div>
                    </div>

                    {/* Characters and Conversation */}
                    <div className="flex flex-col items-center space-y-4 mb-8">
                        {/* NPC Character and Speech */}
                        <div className="flex items-center space-x-4">
                            <PixelCharacter type="npc" isTalking={npcIsTalking} />
                            <SpeechBubble 
                                message={conversation.npcMessage} 
                                isNpc={true}
                                className={npcIsTalking ? 'bounce-in' : ''}
                            />
                        </div>

                        {/* Player Character and Speech */}
                        {selectedPhrase && (
                            <div className="flex items-center space-x-4">
                                <SpeechBubble 
                                    message={selectedPhrase} 
                                    isNpc={false}
                                    className={`bounce-in ${isCorrect ? 'bg-green-100' : 'bg-red-100'}`}
                                />
                                <PixelCharacter type="player" isTalking={playerIsTalking} />
                            </div>
                        )}

                        {/* Feedback */}
                        {showFeedback && (
                            <div className={`text-center p-4 rounded-lg ${isCorrect ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'} ${isCorrect ? 'bounce-in' : 'shake'}`}>
                                <div className="font-bold">{feedbackMessage}</div>
                            </div>
                        )}
                    </div>


                    {/* Phrase Options */}
                    <div className="space-y-2">
                        <h3 className="font-bold text-gray-800 mb-3">ÎãµÎ≥ÄÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî:</h3>
                        {availablePhrases.map((phrase, index) => (
                            <button
                                key={index}
                                onClick={() => handlePhraseSelect(phrase)}
                                disabled={selectedPhrase !== ''}
                                className="w-full p-3 bg-white border-2 border-gray-300 rounded-lg text-left hover:bg-gray-50 hover:border-blue-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                            >
                                <div className="font-bold text-gray-800 text-lg">{phrase.korean}</div>
                            </button>
                        ))}
                    </div>

                    {/* Game Controls */}
                    <div className="mt-6 text-center">
                        <button 
                            onClick={resetGame}
                            className="pixel-button mr-4"
                        >
                            Í≤åÏûÑ Ï¥àÍ∏∞Ìôî
                        </button>
                        <button 
                            onClick={() => setGameState('intro')}
                            className="pixel-button"
                        >
                            Î©îÏù∏ Î©îÎâ¥
                        </button>
                    </div>
                </div>
            );
        };

        // Render the game
        ReactDOM.render(<KoreanPhraseGame />, document.getElementById('root'));
    </script>
</body>
</html>
